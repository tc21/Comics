<Window x:Class="Comics.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Comics"
        mc:Ignorable="d"
        Title="Comics" Height="600" Width="800">

    <Window.Resources>
        <local:ThumbnailConverter x:Key="ThumbnailConverter" />
        <!-- Cleaner menu items via: https://stackoverflow.com/questions/5276826/system-windows-controls-menuitem-without-icon-area -->
        <ItemsPanelTemplate x:Key="MenuItemPanelTemplate">
            <StackPanel Background="White"/>
        </ItemsPanelTemplate>
        <Style TargetType="{x:Type MenuItem}">
            <Setter Property="ItemsPanel" Value="{StaticResource MenuItemPanelTemplate}"/>
        </Style>
        <Style TargetType="{x:Type ContextMenu}">
            <Setter Property="ItemsPanel" Value="{StaticResource MenuItemPanelTemplate}"/>
        </Style>
    </Window.Resources>
    
    <DockPanel>
        <!-- Status bar -->
        <StatusBar DockPanel.Dock="Bottom" Height="22">
            <StatusBarItem HorizontalAlignment="Left" FontSize="11">
                <Button Content="⚙" Width="16" Height="16" Padding="-1,-2,0,0" Background="{x:Null}" Foreground="#FF37383A" FontSize="14" BorderThickness="0" />
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right" FontSize="11">
                <Button Content="▶❚" Width="16" Height="16" Padding="0,-2,0,0" Background="{x:Null}" Foreground="#FF37383A" FontSize="14" BorderThickness="0" Click="ToggleRightSidebar" FontStretch="UltraCondensed"/>
            </StatusBarItem>
        </StatusBar>
        
        <!-- Everything else -->
        <DockPanel>
            <!-- Right sidebar -->
            <Rectangle x:Name="RightSidebar" Fill="#99000000" DockPanel.Dock="Right" Margin="0,0,0,0" Width="200"/>
            
            <!-- Main area (collection view) -->
            <DockPanel Margin="0,0,0,0" x:Name="ContentGrid">
                <!-- Header (category and sort selection) -->
                <DockPanel DockPanel.Dock="Top" Height="40" Background="#23000000">
                    <Label DockPanel.Dock="Left" Content="Category" TextOptions.TextFormattingMode="Display" FontSize="22" />
                    <Label DockPanel.Dock="Right" Content="Group:" TextOptions.TextFormattingMode="Display" FontSize="14" VerticalAlignment="Center" />
                    <Label DockPanel.Dock="Right" Content="Sort:" TextOptions.TextFormattingMode="Display" FontSize="14" VerticalAlignment="Center" />
                    <Rectangle />
                </DockPanel>
                
                <!-- Scrollable view -->
                <ScrollViewer>
                    <ListBox x:Name="Collection" ScrollViewer.HorizontalScrollBarVisibility="Disabled">
                        <ListBox.ItemsPanel>
                                <ItemsPanelTemplate>
                                        <WrapPanel />
                                </ItemsPanelTemplate>
                        </ListBox.ItemsPanel>
                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <DockPanel Width="200" Height="300">
                                    <TextBlock DockPanel.Dock="Bottom" HorizontalAlignment="Center" VerticalAlignment="Center" Text="{Binding Author}" FontSize="10" LineHeight="14" Height="14" Foreground="#FF7F7F7F" TextTrimming="CharacterEllipsis"/>
                                    <TextBlock DockPanel.Dock="Bottom" HorizontalAlignment="Center" Text="{Binding Title}" FontSize="12" LineHeight="16" Height="16" TextWrapping="WrapWithOverflow" TextTrimming="CharacterEllipsis"/>
                                    <Image Source="{Binding Path=ThumbnailPath, Converter={StaticResource ThumbnailConverter}}" />
                                </DockPanel>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                        <ListBox.ContextMenu>
                            <ContextMenu>
                                <MenuItem Header="Open" Click="ContextMenu_Open" />
                            </ContextMenu>
                        </ListBox.ContextMenu>
                    </ListBox>
                </ScrollViewer>
            </DockPanel>
        </DockPanel>
    </DockPanel>

</Window>
